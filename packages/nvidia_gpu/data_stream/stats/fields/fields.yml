---
- name: gpu
  type: group
  description: >
    Fields related to NVIDIA GPUs.
  fields:
    - name: clock
      type: group
      fields:
        - name: streaming_multiprocessor_frequency
          type: float
          metric_type: gauge
          description: > 
            SM clock frequency (in MHz).
        - name: mem_frequency
          type: float
          metric_type: gauge
          description: > 
            Memory clock frequency (in MHz).
    - name: temperature
      type: group
      fields:
        - name: memory
          type: float
          metric_type: gauge
          description: > 
            Memory temperature (in C).
        - name: gpu
          type: float
          metric_type: gauge
          description: > 
            GPU temperature (in C).
    - name: power
      type: group
      fields:
        - name: usage
          type: float
          metric_type: gauge
          description: > 
            Current power usage of the GPU in Watts.
        - name: energy_consumption.total
          type: long
          metric_type: counter
          description: > 
            Total energy consumption since boot (in mJ).
    - name: pcie
      type: group
      fields:
        - name: tx_bytes
          type: float
          metric_type: counter
          description: > 
            Total number of bytes transmitted through PCIe TX via NVML.
        - name: rx_bytes
          type: float
          metric_type: counter
          description: > 
            Total number of bytes received through PCIe RX via NVML.
        - name: replay
          type: float
          metric_type: gauge
          description: > 
            Replay counter for the PCIe connection.
    - name: utilization
      type: group
      fields:
        - name: gpu
          type: float
          metric_type: gauge
          description: > 
           GPU utilization (in %).
        - name: memory_copy
          type: float
          metric_type: gauge
          description: > 
            Memory utilization (in %).
        - name: encoder
          type: float
          metric_type: gauge
          description: > 
           Encoder utilization (in %).
        - name: decoder
          type: float
          metric_type: gauge
          description: > 
           Decoder utilization (in %).
    - name: error
      type: group
      fields:
        - name: code
          type: keyword
          description: >
            Specific Error code for the XID error on the GPU.
        - name: message
          type: keyword
          description: >
            Specific Error message for the XID error on the.
        - name: xid
          type: keyword
          description: >
            The eXerience ID of the error being reported by the GPU.
    - name: memory
      type: group
      fields:
        - name: framebuffer.size.free
          type: long
          metric_type: gauge
          description: >
            Free size of the framebuffer.
        - name: framebuffer.size.used
          type: long
          metric_type: gauge
          description: >
            Used size of the framebuffer.
    - name: ecc
      type: group
      description: >
        Fields related to errors metrics.
      fields:
        - name: double_bit_persistent
          type: long
          metric_type: gauge
          description: >
            Double-bit persistent errors count for GPU memory.
        - name: double_bit_volatile
          type: long
          metric_type: gauge
          description: >
            Double-bit volatile errors count for GPU memory.
        - name: single_bit_persistent
          type: long
          metric_type: gauge
          description: >
            Single-bit persistent errors count for GPU memory.
        - name: single_bit_volatile
          type: long
          metric_type: gauge
          description: >
            Single-bit volatile errors count for GPU memory.            
    - name: nvlink
      type: group
      description: >
        Fields related to nvlink.
      fields:
        - name: flowcontrol_crc_errors.count
          type: long
          metric_type: gauge
          description: >
            Total number of NVLink flow-control CRC errors.
        - name: data_crc_errors.count
          type: long
          metric_type: gauge
          description: >
            Total number of NVLink data CRC errors. 
        - name: replay_errors.count
          type: long
          metric_type: gauge
          description: >
            Total number of NVLink retries.
        - name: recovery_errors.count
          type: long
          metric_type: gauge
          description: >
            Total number of NVLink recovery errors.
        - name: bandwidth.total
          type: long
          metric_type: gauge
          description: >
            Total number of NVLink bandwidth counters for all lanes.
        - name: bandwidth_l0.total
          type: long
          metric_type: gauge
          description: >
            The number of bytes of active NVLink rx or tx data including both header and payload.
    - name: license_vgpu_status
      type: keyword
      description: >
        vGPU License status.
    - name: Remapped
      type: group
      description: >
        Fields related to Remapped rows.
      fields:
        - name: uncorrectable_remapped_rows.count
          type: long
          metric_type: gauge
          description: >
            Number of remapped rows for uncorrectable errors
        - name: correctable_remapped_rows.count
          type: long
          metric_type: gauge
          description: >
            Number of remapped rows for correctable errors
        - name: failed_remapped_rows.count
          type: long
          metric_type: gauge
          description: >
            Whether remapping of rows has failed
    - name: device
      type: group
      fields:
        - name: brand
          type: keyword
          description: >
            Brand of the GPU device.
        - name: serial_number
          type: keyword
          description: >
            Device Serial Number
        - name: id
          type: keyword
          description: >
            ID of the GPU device.
          dimension: true
        - name: info_rom.oem_version
          type: keyword
          description: >
            OEM version of the info ROM.
        - name: info_rom.version
          type: keyword
          description: >
            Version of the info ROM.
        - name: ecc_info_rom.version
          type: keyword
          description: >
            ECC inforom version
        - name: power_info_rom.version
          type: keyword
          description: >
            Power management object inforom version
        - name: model
          type: keyword
          description: >
            Model of the GPU device.
        - name: name
          type: keyword
          description: >
            Name of the GPU device.
        - name: uuid
          type: keyword
          description: >
            UUID of the GPU device.
          dimension: true
        - name: vbios.version
          type: keyword
          description: >
            Version of the vbios.
    - name: driver
      type: group
      fields:
        - name: nvml_version
          type: keyword
          description: >
            NVML version of the driver.
        - name: version
          type: keyword
          description: >
            Version of the driver.
    - name: throttling
      type: group
      fields:
        - name: board_limit
          type: float
          metric_type: gauge
          description: >
            Number of microseconds throttled due to Board limit.
        - name: low_utilization
          type: float
          metric_type: gauge
          description: >
            Number of microseconds throttled due to low utilization.
        - name: power
          type: float
          metric_type: gauge
          description: >
            Number of microseconds throttled due to power.
        - name: reliability
          type: float
          metric_type: gauge
          description: >
            Number of microseconds throttled due to reliability.
        - name: sync_boost
          type: float
          metric_type: gauge
          description: >
            Number of microseconds throttled due to Sync Boost.
        - name: thermal
          type: float
          metric_type: gauge
          description: >
            Number of microseconds throttled due to thermals.
    - name: dcp
      type: group
      description: >
        Fields related to NVIDIA GPUs.
      fields:
        - name: graphics_engine
          type: group
          fields:
            - name: active
              type: float
              metric_type: gauge
              description: >
                Ratio of time the graphics engine is active.
        - name: sm
          type: group
          fields:
            - name: active
              type: float
              metric_type: gauge
              description: >
                The ratio of cycles an SM has at least one warp assigned.
            - name: occupancy
              type: float
              metric_type: gauge
              description: >
                The ratio of number of warps resident on an SM.
        - name: tensor_pipe
          type: group
          fields:
            - name: active
              type: float
              metric_type: gauge
              description: >
                Ratio of cycles the tensor (HMMA) pipe is active.
        - name: dram
          type: group
          fields:
            - name: active
              type: float
              metric_type: gauge
              description: >
                Ratio of cycles the device memory interface is active sending or receiving data.
        - name: fp64_pipe
          type: group
          fields:
            - name: active
              type: float
              metric_type: gauge
              description: >
                Ratio of cycles the fp64 pipes are active.
        - name: fp32_pipe
          type: group
          fields:
            - name: active
              type: float
              metric_type: gauge
              description: >
                Ratio of cycles the fp32 pipes are active.
        - name: fp16_pipe
          type: group
          fields:
            - name: active
              type: float
              metric_type: gauge
              description: >
                Ratio of cycles the fp16 pipes are active.
        - name: pcie
          type: group
          fields:
            - name: tx_bytes
              type: float
              metric_type: gauge
              description: >
                The rate of data transmitted over the PCIe bus - including both protocol headers and data payloads - in bytes per second.
            - name: rx_bytes
              type: float
              metric_type: gauge
              description: >
                The rate of data received over the PCIe bus - including both protocol headers and data payloads - in bytes per second.
    - name: pci.bus.id
      type: keyword
      description: >
        Bus ID of the PCI device.
  
- name: prometheus
  type: group
  description: >
    Fields related to Prometheus metadata.
  fields:
    - name: up
      type: group
      description: >
        Fields related to Prometheus `up` data.
      fields:
        - name: value
          type: keyword
          description: >
            Whether prometheus reports the targeted instance as up or down.
    - name: node
      type: group
      description: >
        Fields related to Prometheus node metadata.
      fields:
        - name: hostname
          type: keyword
          description: >
            Hostname of the Prometheus node.

          dimension: true
        - name: job
          type: keyword
          description: >
            Job of the Prometheus node.

          dimension: true
        - name: id
          type: integer
          description: >
            ID of the Prometheus node.

          dimension: true
